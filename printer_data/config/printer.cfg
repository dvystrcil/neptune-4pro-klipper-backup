[respond]

#[include chopper_tune.cfg]

# [include klipper-tmc-autotune.cfg]

[include eddy-ng.cfg]

#[include adxlmcu.cfg]

#[include vibrations-profiler.cfg]

[include awd-sync.cfg]

[include klipper-backup.cfg]

[include klipper-maintenance.cfg]

[include led-control.cfg]

[include steppers.cfg]

[include reshelper.cfg]

[include motion-test.cfg]

[include th-nitehawk.cfg]


# Recommended Klipper & MCU FW v0.11 (Not v0.10 Dirty as shipped) see flash info below
# This version of the printer.cfg of the Neptune 4 has been improved by SmartHome42/Printernbeer (Julien Mairy) 
# with valuable advice from Tom's Basement

# Additional firmware update info and Neptune 4 Pro changes by HalfManBear

# This file contains common pin mappings for ELEGOO / MKS ZNP-K1 boards.
# To use this config, the firmware should be compiled for the STMicroelectronics
# STM32F401. When running "make menuconfig", select the 32KiB
# bootloader, and enable "Serial for communication" on "USART1 PA10/PA9"
# Press and hold both RESET and BOOT button (or bridge BOOT Pads on the PCB if you've not added a button) 
# Whilst both are pressed/bridged let go of RESET first then BOOT 
# To flash, "sudo service klipper stop" then run cmd below
# stm32flash -w /home/mks/klipper/out/klipper.bin -v -S 0x08008000 -g 0x08000000 /dev/ttyS0
# Reboot after flash completes

# See docs/Config_Reference.md for a description of parameters.

#####################################################################
# 	Base Config
#####################################################################

[mcu]
# The hardware use USART1 PA10/PA9 connect to RK3328
serial: /dev/ttyS0
baud: 250000
restart_method: command

[printer]
kinematics:cartesian
max_velocity: 1000 #500
max_accel: 15150 #11000 (15000)
max_z_velocity: 100 #40
max_z_accel: 2000 #1600
square_corner_velocity: 5.0 #10.0
minimum_cruise_ratio: 0.0

[danger_options]
single_mcu_trsync_timeout: 0.45
multi_mcu_trsync_timeout: 0.05

[virtual_sdcard]
path: /home/mks/printer_data/gcodes
on_error_gcode: CANCEL_PRINT

[exclude_object]

[skew_correction] 

[force_move]
enable_force_move: True

[idle_timeout]
timeout: 2100

[display_status]

[gcode_arcs]


#####################################################################
# 	Input Shaper
#####################################################################

[input_shaper]
shaper_type_x: mzv
shaper_freq_x: 75.4
damping_ratio_x: 0.0786

shaper_type_y: mzv
shaper_freq_y: 76.8
damping_ratio_y: 0.054

# [resonance_tester]
# # accel_chip: defined in other includes adxl345 nhk
# probe_points:
#    117.5,117.5,20
# #accel_per_hz: 90 # - Y axis,  60 - X axis
# hz_per_sec: 1
# min_freq: 10
# max_freq: 140
# move_speed: 50
# sweeping_accel: 200
# sweeping_period: 1.2

#####################################################################
# 	Extruder
#####################################################################

[extruder] 
microsteps: 16
rotation_distance: 4.637
full_steps_per_rotation: 200  #200 for 1.8 degree, 400 for 0.9 degree
nozzle_diameter: 0.400
min_temp: 0
max_temp: 330
max_power: 1
pressure_advance: 0.02725
pressure_advance_smooth_time: 0.02
max_extrude_cross_section: 5 	#standard klipper default 4* (NozzleDiam^2)
instantaneous_corner_velocity: 5.000
max_extrude_only_distance: 500
max_extrude_only_velocity: 120
max_extrude_only_accel: 3000
# step_pulse_duration:0.000002
step_pin: nhk:gpio23
dir_pin: !nhk:gpio24
enable_pin: !nhk:gpio25
heater_pin: nhk:gpio9
sensor_pin: nhk:gpio29
sensor_type: PT1000
pullup_resistor: 2200
#control: mpc
heater_power: 70
cooling_fan: fan
filament_diameter: 1.750
filament_density: 1.20
filament_heat_capacity: 1.7

[verify_heater extruder]
max_error: 120
check_gain_time:40
hysteresis: 10
heating_gain: 2

[firmware_retraction]
retract_length: 0.3
# The length of filament (in mm) to retract when G10 is activated,
# and to unretract when G11 is activated (but see
# unretract_extra_length below). The default is 0 mm.
retract_speed: 40
# The speed of retraction, in mm/s. The default is 20 mm/s.
unretract_extra_length: 0
# The length (in mm) of *additional* filament to add when
# unretracting.
unretract_speed: 30
# The speed of unretraction, in mm/s. The default is 10 mm/s.

[gcode_macro M109]
rename_existing: M99109
gcode:
  #Parameters
  {% set s = params.S|float %}
  
  M104 {% for p in params %}{'%s%s' % (p, params[p])}{% endfor %}  ; Set hotend temp
  {% if s != 0 %}
      TEMPERATURE_WAIT SENSOR=extruder MINIMUM={s} MAXIMUM={s+1}   ; Wait for hotend temp (within 1 degree)
  {% endif %}

#####################################################################
# 	Bed Heater
#####################################################################

[heater_bed]
heater_pin:PB10
sensor_type: NTC 100K MGB18-104F39050L32
sensor_pin: PA0
max_power: 1.0
#control = pid
#pid_kp = 68.601
#pid_ki = 1.550
#pid_kd = 758.895
min_temp: 0
max_temp: 120 

[verify_heater heater_bed]
max_error: 120
check_gain_time:120
hysteresis: 10
heating_gain: 1

[heater_generic heater_bed_outer]
heater_pin:PC8
max_power:1.0
sensor_type: NTC 100K MGB18-104F39050L32
sensor_pin:PC2
#control = pid
#pid_kp = 75.301
#pid_ki = 1.383
#pid_kd = 1025.032
min_temp:0
max_temp:120

[verify_heater heater_bed_outer]    # Heating block temperature tolerance configuration
max_error: 600                 # maximum error
check_gain_time:120            # Tolerance time
hysteresis: 10                 # tolerance temperature
heating_gain: 1                # Heating gain

[gcode_macro M190]
rename_existing: M99190
gcode:
  # --- require S parameter ---
  {% if params.S is not defined %}
    RESPOND PREFIX="bed heater" MSG="No S parameter provided. Using M140 S0."
    M140 S0
  {% else %}
    # --- sanitize target temp ---
    {% set target = params.S|float %}
    {% set target = [target, 120]|min %}

    # --- object references ---
    {% set bed = printer.heater_bed %}
    {% set outer = printer["heater_generic heater_bed_outer"] %}

    # --- set temperatures ---
    SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={target|int}
    SET_HEATER_TEMPERATURE HEATER=heater_bed_outer TARGET={target|int}

    # --- wait for outer heater ---
    {% if outer.temperature < target %}
      TEMPERATURE_WAIT SENSOR="heater_generic heater_bed_outer" MINIMUM={target-1} MAXIMUM={target+1}
    {% endif %}

    # --- wait for main bed heater ---
    {% if bed.temperature < target %}
      TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={target-1} MAXIMUM={target+1}
    {% endif %}

    RESPOND PREFIX="bed_heater" MSG="Bed and outer heater reached {target|int}Â°C."
  {% endif %}

	   
[gcode_macro M140]
rename_existing: M99140
gcode:
  {% set s = (params.S|float,120)|min %}
  {% if params.S is defined %}
    SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={s|int}
    SET_HEATER_TEMPERATURE HEATER=heater_bed_outer TARGET={s|int}
  {% else %}
    SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET=0
    SET_HEATER_TEMPERATURE HEATER=heater_bed_outer TARGET=0
  {% endif %} 

[gcode_macro M141]
gcode:
  RESPOND PREFIX=chamber MSG="Chamber heating done."

[gcode_macro M191]
gcode:
  {% set s = params.S|float %}
  {% if s == 0 %}
      RESPOND PREFIX=chamber MSG="Chamber heating cancelled"
  {% else %}
      RESPOND PREFIX=chamber MSG="Chamber heating to: {s}c"
      M140 S110
      TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={s-1} 
      RESPOND PREFIX=chamber MSG="... chamber at target temperature"
  {% endif %}

#####################################################################
# 	Fan Control
#####################################################################

[gcode_macro M106]
rename_existing: M106.1 
gcode:
  {% set fan = 'fan' + (params.P|int if params.P is defined else 0)|string %}
  {% set speed = (params.S|float / 255 if params.S is defined else 1.0) %}
  {% if fan == "fan3" %} 
      SET_FAN_SPEED FAN="Bentobox" SPEED={speed} 
      RESPOND PREFIX=fan MSG="Setting {fan} to: {speed}"
  {% else %} 
      M106.1 {rawparams}
  {% endif %}
     
# [fan]
# pin: PC9

[fan_generic Bentobox]
pin: PC7
cycle_time: 0.01
hardware_pwm: false

[temperature_fan Controler_Fan]
pin: PB7
max_power: 1.0
min_speed: 0.1
max_speed: 0.30
kick_start_time: 0
control: watermark
sensor_type: temperature_host
min_temp: 0
max_temp: 100
target_temp: 25

[gcode_macro Bentobox_On]
description: CYD_SCREEN_MACRO
gcode:
  SET_FAN_SPEED FAN="Bentobox" SPEED=1.0

[gcode_macro Bentobox_Off]
description: CYD_SCREEN_MACRO
gcode:
  SET_FAN_SPEED FAN="Bentobox" SPEED=0.0

####################################################################
# Homing and Gantry Adjustment Routines
####################################################################

[bed_mesh]
horizontal_move_z: 2.0
speed: 300
mesh_min: 15, 15 
mesh_max: 213, 220 
probe_count: 21,21 
algorithm: bicubic
zero_reference_position: 117.5,117.5
#scan_overshoot: 8  #uncomment this section if you still have room left over on the X axis for some scan overshoot to product smoother movements and more accurate scanning. Uncommenting this should be fine if you are using a standard voron mount.

[safe_z_home]
home_xy_position: 117.5, 117.5 # Choose an X,Y position that is in the center of your bed. For a 300x300 machine that will be 150, 150. Use the same principle to calculate your bed center.
z_hop: 10
z_hop_speed: 25
speed: 200

[z_tilt] 
z_positions: -23, 117.5  # nozzle coordinates
			 291,117.5 
points: 81,117.5         # probe coordinates
		249.5,117.5
speed: 250
horizontal_move_z: 2.0
retries: 5
retry_tolerance: 0.015

[screws_tilt_adjust]
screw1_name: front left screw
screw1: 81, 34
screw2_name: rear left screw
screw2: 81, 204
screw3_name: rear right screw
screw3: 249.5, 204 
screw4_name: front right screw
screw4: 249.5, 34  
horizontal_move_z: 10
speed: 300
screw_thread: CW-M4  # Use CW for Clockwise and CCW for Counter Clockwise

[axis_twist_compensation]
calibrate_start_x: 58.75
calibrate_end_x: 176.25
calibrate_y: 117.5

[gcode_macro GET_BED_MESH]
gcode:
  G28
  # BED_MESH_CALIBRATE METHOD=rapid_scan
  EDDYNG_BED_MESH_EXPERIMENTAL

[gcode_macro FULL_HOME]
gcode:
  {% set need_x = 'x' not in printer.toolhead.homed_axes %}
  {% set need_y = 'y' not in printer.toolhead.homed_axes %}
  {% set need_z = 'z' not in printer.toolhead.homed_axes %}

  # Home only axes that are not homed
  {% if need_x and need_y and need_z %}
    G28
  {% else %}
    {% if need_x %}
      G28 X
    {% endif %}
    {% if need_y %}
      G28 Y
    {% endif %}
    {% if need_z %}
      G28 Z
    {% endif %}
  {% endif %}

  AWD_SYNC  
  Z_TILT_ADJUST SAMPLES=1 RETRY_TOLERANCE=0.025
  Z_TILT_ADJUST SAMPLES=1  
  BRUSH

  # Move to center, and wait for the buffer to clear
  G28 Z
  G4 S5
  M400

  PROBE_EDDY_NG_TAP THRESHOLD=800 SAMPLES=3 MAX_SAMPLES=10 TARGET_Z=-0.500


[gcode_macro Bed_Level_Screws_Tune]
gcode:
  BED_MESH_CLEAR
  SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET=75
  SET_HEATER_TEMPERATURE HEATER=heater_bed_outer TARGET=75      
  G28
  TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM=72 MAXIMUM=75
  TEMPERATURE_WAIT SENSOR="heater_generic heater_bed_outer" MINIMUM=72 MAXIMUM=78
  SCREWS_TILT_CALCULATE
      
[gcode_macro Auto_Full_Bed_Level]
gcode:
  RESPOND PREFIX="info" MSG="Running Custom Bed Leveling Macro"
  BED_MESH_CLEAR
  SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET=60
  SET_HEATER_TEMPERATURE HEATER=heater_bed_outer TARGET=60
  G28
  TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM=58 MAXIMUM=65
  TEMPERATURE_WAIT SENSOR="heater_generic heater_bed_outer" MINIMUM=58 MAXIMUM=65 
  BED_MESH_CALIBRATE

#####################################################################
# 	Macros
#####################################################################

[gcode_macro PRINT_START]    
gcode:
  {% set e_temp = params.EXTRUDER| default(-1) | int %}
  {% set b_temp = params.BED_TEMP| default(60) | int %}
  {% set l_temp = e_temp - 20 %}
  RESPOND PREFIX=print_start MSG="Setting up..."
  SKEW_PROFILE LOAD=CaliFlower
  G92 E0   

  RESPOND PREFIX=print_start MSG="Lower temperature to prevent leakage ({l_temp}C)"
  M140 S{b_temp} ; start heating the bed
  M109 S{l_temp} ; cool down
  RESPOND PREFIX=print_start MSG="Waiting for bed to reach target of ({b_temp}C)"
  M190 S{b_temp} ; heat bed to target, wait
  G4 S30         ; let the bed soak a little
  BRUSH          ; clean the brush, our temps are ready
  
  RESPOND PREFIX=print_start MSG="Homing ..."
  FULL_HOME

  RESPOND PREFIX=print_start MSG="Creating bed mesh"
  BED_MESH_CLEAR                                     
  # BED_MESH_CALIBRATE ADAPTIVE=1 METHOD=rapid_scan algorithm=bicubic   
  EDDYNG_BED_MESH_EXPERIMENTAL 

  RESPOND PREFIX=print_start MSG="Move to start position"
  G1 X50.5 Y2 Z0.4 F6000 
  G1 X55.5 F600
  M109 S{e_temp}
  G1 E10 F600 ;prime Nozzle
  G92 E0 ;Reset Extruder

  RESPOND PREFIX=print_start MSG="Draw the first line"
  G1 X167.5 E40 F400 ;Draw the first line
  G1 Z0.6 F120.0 ;Move to side a little
  G1 X162.5 F3000
  G92 E0 ;Reset Extruder
  RESPOND PREFIX=print_start MSG="Printing..."        
       
[gcode_macro PRINT_END]
gcode:
  {% set z_safe = [printer.toolhead.position.z + 10, printer.toolhead.axis_maximum.z]|min %}
  SET_SKEW CLEAR=1
  M400               ; wait for buffer to clear  
                     ; start wipe out
  TURN_OFF_HEATERS
  G92 E0             ; zero the extruder
  G1 Z{z_safe} F3000 ; raise Z to safe position
  G91                ; relative positioning
  G1 E-2 F2700       ; retract a bit
  G1 X5 Y5 F3000     ; wipe out
  G1 E-2 Z0.2 F1600  ; retract and raise Z
                     ; start safe position and presentation  
  PARK_TOOLHEAD      ; move print head to safe position
  BRUSH
  G90                ; absolute positioning
  G1 Y230            ; present print
  M107               ; turn off fan
  M84
  RESPOND PREFIX=print_end MSG="Finished printing."  

[pause_resume]

[gcode_macro CANCEL_PRINT]
rename_existing: BASE_CANCEL_PRINT
gcode:    
  SET_IDLE_TIMEOUT TIMEOUT={printer.configfile.settings.idle_timeout.timeout} 
  CLEAR_PAUSE
  SDCARD_RESET_FILE
  PRINT_END
  BASE_CANCEL_PRINT

[gcode_macro PAUSE]
description: Pause the actual running print
rename_existing: PAUSE_BASE
variable_restore_idle_timeout: 0
gcode:
  ##### get user parameters or use default ##### 
  {% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
  {% set idle_timeout = client.idle_timeout|default(0) %}
  {% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0%}
  {% set restore = False if printer.toolhead.extruder == ''
              else True  if params.RESTORE|default(1)|int == 1 else False %}
  ##### end of definitions #####
  SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
  # set a new idle_timeout value
  {% if idle_timeout > 0 %}
    SET_GCODE_VARIABLE MACRO=PAUSE VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
    SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
  {% endif %}
  PAUSE_BASE
  PARK_TOOLHEAD

[gcode_macro RESUME]
description: Resume the actual running print
rename_existing: RESUME_BASE
variable_last_extruder_temp: {'restore': False, 'temp': 0}
gcode:
  ##### get user parameters or use default #####
  {% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
  {% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
  {% set sp_move = client.speed_move|default(velocity) %}
  ##### end of definitions #####
  # restore idle_timeout time if needed
  {% if printer['gcode_macro PAUSE'].restore_idle_timeout > 0 %}
    SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro PAUSE'].restore_idle_timeout}
  {% endif %}
  {% if printer.idle_timeout.state|upper == "IDLE" %}
    {% if last_extruder_temp.restore %} M109 S{last_extruder_temp.temp} {% endif %}
  {% endif %}
  _CLIENT_EXTRUDE
  RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
  BRUSH

[gcode_macro _CLIENT_EXTRUDE]
description: Extrudes, if the extruder is hot enough
gcode:
  ##### get user parameters or use default #####
  {% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
  {% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
  {% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
  {% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
  {% set absolute_extrude = printer.gcode_move.absolute_extrude %}
  ##### end of definitions #####
  {% if printer.toolhead.extruder != '' %}
    {% if printer[printer.toolhead.extruder].can_extrude %}
      {% if use_fw_retract %}
        {% if length < 0 %}
          G10
        {% else %}
          G11
        {% endif %}
      {% else %}
        M83
        G1 E{length} F{(speed|float|abs) * 60}
        {% if absolute_extrude %}
          M82
        {% endif %}
      {% endif %}
    {% else %}
      RESPOND TYPE=echo MSG='Extruder not hot enough'
    {% endif %}
  {% endif %}

[gcode_macro TEST_POS]
gcode:
  {% set z_safe = [printer.toolhead.position.z + 10, printer.toolhead.axis_maximum.z]|min %}
  RESPOND PREFIX=test MSG=" what is: {printer.toolhead.axis_maximum.z}"
  RESPOND PREFIX=test MSG=" what is z_safe: {z_safe}"

[gcode_macro _POSITION_NOZZLE_OVER_BUCKET]
gcode: 
	RESPOND PREFIX=parking MSG="... Positioning nozzle over purge bucket"
  G90 
	G1 X279 F9000 

[gcode_macro PARK_TOOLHEAD]
description: CYD_SCREEN_MACRO
gcode:
  RESPOND PREFIX=parking MSG="Parking toolhead"
  {% if "x" not in printer.toolhead.homed_axes %}
    RESPOND PREFIX=parking MSG="... homing required"
    G28     
  {% endif %}
  _POSITION_NOZZLE_OVER_BUCKET

[gcode_macro PARK_CENTER]
description: CYD_SCREEN_MACRO
gcode:
  RESPOND PREFIX=parking MSG="Parking in the center"
  G28 
  G90 # Abs positioning
  G1 X{ printer.toolhead.axis_maximum.x/2 } Y{ printer.toolhead.axis_maximum.y/2 } Z100 F6000 
    
[gcode_macro PID_Tune_EXTRUDER]
gcode:
  G28
  M106 S255
  # PID_CALIBRATE HEATER=extruder TARGET=215
  PID_CALIBRATE HEATER=extruder TARGET=240 TOLERANCE=0.01 WRITE_FILE=1
  SAVE_CONFIG

[gcode_macro PID_Tune_Inner_BED]
gcode:
  G28
  M106 S255 ;Sets Print Fans to 100%
  PID_CALIBRATE HEATER=heater_bed TARGET=60
  SAVE_CONFIG

[gcode_macro PID_Tune_Outer_BED]
gcode:
  G28
  M106 S255 ;Sets Print Fans to 100%
  SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET=60 	;Heats Inner Zone to 60c at same time for better tuning 
  PID_CALIBRATE HEATER=heater_bed_outer TARGET=60
  SAVE_CONFIG

[gcode_macro DISABLE_Y_MOTORS]
description: CYD_SCREEN_MACRO
gcode:
  SET_STEPPER_ENABLE STEPPER=stepper_y ENABLE=0
  SET_STEPPER_ENABLE STEPPER=stepper_y1 ENABLE=0

#####################################################################
# 	Other
#####################################################################

[gcode_macro FORCE_SET_POS]
gcode:
  {% if 'resonance_tester' in printer.configfile.settings %}
  {% set home = printer.configfile.settings.resonance_tester.probe_points[0] %}
  {% endif %}

  {% set K_X = params.X | default(home[0] if home else 127 ) | float %}
  {% set K_Y = params.Y | default(home[1] if home else 127) | float %}
  {% set K_Z = params.Z | default(home[2] if home else 0) | float %}

  SET_KINEMATIC_POSITION X={K_X} Y={K_Y} Z={K_Z}

  # Moving To Full step positions:
  G91
  G1 X0.1 Y0.1 Z0.025
  SET_KINEMATIC_POSITION X={K_X} Y={K_Y} Z={K_Z}
  G90
  # Done
  
  # Cycling motion
  G91
  G1 X0.001 Y0.001 Z0.001
  G1 X-0.001 Y-0.001 Z-0.001
  G90 

      
#############################################################################
#   Fan & Temp Monitoring Config
#############################################################################

[temperature_sensor Rockchip_Host]
sensor_type: temperature_host
min_temp: 10
max_temp: 80

[temperature_sensor STM32_Mcu]
sensor_type: temperature_mcu
min_temp: 10
max_temp: 85

[temperature_sensor chamber]
sensor_type: Generic 3950
sensor_pin: PICO_MMU: PA3
min_temp: 0
max_temp: 100
gcode_id: C

#############################################################################
#   Must come last configs
#############################################################################

[include moonraker_obico_macros.cfg]

[include sp_mmu.cfg]

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [motors_sync]
#*# steps_model_y = quadratic,
#*# 	-88.25375990585242,
#*# 	2800.42481616351,
#*# 	-1367.702613460092
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	0.190799, 0.172194, 0.131035, 0.109542, 0.110929, 0.125942, 0.132711, 0.137794, 0.141497, 0.130640, 0.135029, 0.135711, 0.126351, 0.121260, 0.124739, 0.126117, 0.125881, 0.106947, 0.107042, 0.107054, 0.153165
#*# 	0.192078, 0.121191, 0.093822, 0.085697, 0.076249, 0.081131, 0.086573, 0.080579, 0.072712, 0.078432, 0.070527, 0.068036, 0.054426, 0.054437, 0.057209, 0.066049, 0.069712, 0.067897, 0.076114, 0.068045, 0.092664
#*# 	0.167942, 0.117499, 0.090482, 0.059911, 0.057592, 0.055265, 0.068486, 0.058516, 0.059120, 0.051695, 0.041257, 0.040107, 0.026835, 0.021619, 0.019410, 0.026613, 0.032939, 0.025251, 0.036895, 0.038280, 0.092588
#*# 	0.161898, 0.096634, 0.063795, 0.049207, 0.045496, 0.051151, 0.052447, 0.050845, 0.045496, 0.038310, 0.037576, 0.028525, 0.024131, 0.011482, 0.013680, 0.024121, 0.027937, 0.022723, 0.023271, 0.026574, 0.050584
#*# 	0.152504, 0.100155, 0.075140, 0.043561, 0.034975, 0.037527, 0.052384, 0.037755, 0.037537, 0.030255, 0.021767, 0.024790, 0.010500, -0.017000, -0.016758, -0.014604, -0.006665, -0.008603, -0.007590, -0.001175, 0.046362
#*# 	0.149354, 0.075435, 0.035488, 0.026879, 0.027436, 0.034547, 0.035940, 0.033899, 0.024361, 0.023634, 0.020613, 0.012371, -0.010146, -0.018471, -0.014231, -0.016148, -0.004746, -0.006119, -0.002272, -0.014960, 0.002952
#*# 	0.155677, 0.087350, 0.054729, 0.018923, 0.021397, 0.018384, 0.033329, 0.034428, 0.028101, 0.033026, 0.019036, 0.018767, -0.009898, -0.016804, -0.022552, -0.030624, -0.022797, -0.023993, -0.014646, -0.021055, 0.008274
#*# 	0.151301, 0.079463, 0.048223, 0.025520, 0.019093, 0.023743, 0.037001, 0.036784, 0.033523, 0.025669, 0.031714, 0.011896, -0.003107, -0.020710, -0.015203, -0.019990, -0.018067, -0.023213, -0.013875, -0.024185, 0.000047
#*# 	0.150295, 0.081090, 0.057524, 0.021985, 0.014307, 0.015668, 0.035515, 0.036436, 0.042923, 0.033390, 0.020582, 0.014255, 0.002014, -0.016548, -0.028766, -0.035466, -0.029273, -0.028313, -0.020895, -0.029038, 0.003796
#*# 	0.118347, 0.050502, 0.019180, 0.000521, -0.005245, 0.007092, 0.012312, 0.020888, 0.024719, 0.022802, 0.018413, 0.006889, -0.015075, -0.030407, -0.029711, -0.022683, -0.022213, -0.026770, -0.017899, -0.032743, 0.000510
#*# 	0.117869, 0.050118, 0.025583, -0.014072, -0.007875, -0.005134, 0.017620, 0.024479, 0.024756, 0.015973, 0.010753, -0.001029, -0.008291, -0.031898, -0.033330, -0.034775, -0.031907, -0.024721, -0.017065, -0.017565, 0.012787
#*# 	0.096296, 0.039315, 0.000744, -0.016355, -0.012207, 0.000834, 0.009891, 0.014266, 0.014087, 0.017569, 0.017014, 0.010455, -0.004616, -0.026071, -0.017942, -0.011952, -0.007365, -0.002443, 0.007846, -0.004764, 0.033528
#*# 	0.124802, 0.059671, 0.037518, -0.007679, 0.004373, 0.002726, 0.030345, 0.025202, 0.034026, 0.025738, 0.022723, 0.028484, 0.011487, -0.013674, -0.003875, -0.000148, 0.004511, 0.003688, 0.020954, 0.014101, 0.036024
#*# 	0.102492, 0.043489, 0.019960, 0.001117, 0.004399, 0.021938, 0.030585, 0.035795, 0.036238, 0.040413, 0.038807, 0.035011, 0.027269, 0.017134, 0.027536, 0.028148, 0.036302, 0.038152, 0.047866, 0.037926, 0.066589
#*# 	0.101954, 0.055050, 0.027901, 0.004490, 0.019562, 0.021763, 0.039681, 0.044944, 0.049168, 0.038113, 0.039501, 0.051280, 0.038564, 0.036724, 0.038329, 0.038572, 0.036325, 0.052030, 0.064752, 0.066367, 0.067755
#*# 	0.072258, 0.031491, -0.000254, 0.000827, 0.003839, 0.023006, 0.035656, 0.043844, 0.046387, 0.049622, 0.054257, 0.049633, 0.050777, 0.043557, 0.058813, 0.059273, 0.072573, 0.074734, 0.087969, 0.069966, 0.110744
#*# 	0.100228, 0.048746, 0.035568, 0.010579, 0.024194, 0.030936, 0.045409, 0.045410, 0.062058, 0.055811, 0.055352, 0.067121, 0.054657, 0.049432, 0.053352, 0.063528, 0.065609, 0.069976, 0.076191, 0.082332, 0.093141
#*# 	0.073953, 0.045450, 0.023954, 0.011905, 0.027410, 0.034131, 0.047538, 0.053754, 0.058377, 0.065304, 0.071249, 0.080695, 0.066003, 0.059526, 0.082317, 0.083929, 0.090967, 0.095847, 0.107441, 0.094488, 0.123460
#*# 	0.125723, 0.069086, 0.053457, 0.036841, 0.049998, 0.044223, 0.067535, 0.075485, 0.083036, 0.090614, 0.090364, 0.098989, 0.089541, 0.077662, 0.085771, 0.096305, 0.102916, 0.108791, 0.116601, 0.114913, 0.114532
#*# 	0.097039, 0.064362, 0.050266, 0.048898, 0.057680, 0.063209, 0.075810, 0.091116, 0.095699, 0.105689, 0.107575, 0.106234, 0.111162, 0.106750, 0.114228, 0.124098, 0.132823, 0.142470, 0.144528, 0.132833, 0.165918
#*# 	0.143737, 0.094594, 0.083268, 0.060359, 0.075974, 0.081635, 0.110926, 0.110845, 0.126534, 0.127903, 0.136168, 0.144902, 0.141894, 0.130893, 0.140059, 0.140515, 0.141683, 0.159401, 0.168495, 0.164349, 0.166880
#*# x_count = 21
#*# y_count = 21
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 18.0
#*# max_x = 200.60000000000002
#*# min_y = 15.0
#*# max_y = 220.0
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 69.644
#*# pid_ki = 1.470
#*# pid_kd = 824.852
#*# pid_version = 1
#*# pid_target = 60.00
#*# pid_tolerance = 0.0200
#*#
#*# [heater_generic heater_bed_outer]
#*# control = pid
#*# pid_kp = 74.985
#*# pid_ki = 1.727
#*# pid_kd = 814.061
#*#
#*# [extruder]
#*# pid_kp = 29.617
#*# pid_ki = 1.727
#*# pid_kd = 126.984
#*# pid_version = 1
#*# pid_target = 240.00
#*# pid_tolerance = 0.0100
#*# control = mpc
#*# block_heat_capacity = 32.6381
#*# sensor_responsiveness = 0.0753308
#*# ambient_transfer = 0.123691
#*# fan_ambient_transfer = 0.123691, 0.135648, 0.143911, 0.148167, 0.150268, 0.151894, 0.160536, 0.167797, 0.164592, 0.172755, 0.171959
#*#
#*# [probe_eddy_ng btt_eddy]
#*# calibrated_drive_currents = 15, 16
#*# calibration_version = 5
#*# reg_drive_current = 15
#*# tap_drive_current = 16
#*# calibration_15 = gASVygMAAAAAAAB9lCiMAXaUSwWMBGZ0b2iUjBtudW1weS5wb2x5bm9taWFsLnBvbHlub21pYWyUjApQb2x5bm9taWFslJOUKYGUfZQojARjb2VmlIwVbnVtcHkuY29yZS5tdWx0aWFycmF5lIwMX3JlY29uc3RydWN0lJOUjAVudW1weZSMB25kYXJyYXmUk5RLAIWUQwFilIeUUpQoSwFLCoWUaAyMBWR0eXBllJOUjAJmOJSJiIeUUpQoSwOMATyUTk5OSv////9K/////0sAdJRiiUNQgPLG5n/x9j8mmALt+cz9PyHxx3hLkeA/Sa6t206W8z/eCMubrZDvP1gDY5uwzgTAbIeuTed+6L9x/4k0nDcLQGGjvf33FdQ/1L/O/6h+9r+UdJRijAZkb21haW6UaAtoDksAhZRoEIeUUpQoSwFLAoWUaBiJQxBm1GtTzFyUPlORgxk/npQ+lHSUYowGd2luZG93lGgLaA5LAIWUaBCHlFKUKEsBSwKFlGgYiUMQAAAAAAAA8L8AAAAAAADwP5R0lGKMB19zeW1ib2yUjAF4lIwGc3ltYm9slGgsdWKMCWZ0b2hfaGlnaJRoBSmBlH2UKGgIaAtoDksAhZRoEIeUUpQoSwFLCoWUaBiJQ1DkwUyeN1MbQMZjrAlpWwxAfguhj2oKAEC8HEo1dCMBQC14OIt2F/C/o8A3zdd9GsD3LZNBzysOQKq2oZWCGilA0hkKYjRY/b+8awQViJ4ZwJR0lGJoHWgLaA5LAIWUaBCHlFKUKEsBSwKFlGgYiUMQtG4LMPablD6S4bM1OqyUPpR0lGJoJGgLaA5LAIWUaBCHlFKUKEsBSwKFlGgYiUMQAAAAAAAA8L8AAAAAAADwP5R0lGJoK2gsaC1oLHVijARodG9mlGgFKYGUfZQoaAhoC2gOSwCFlGgQh5RSlChLAUsKhZRoGIlDULrr/SxmjJQ+p1SPd5a1Gj4VTzs3WRsPvmQ+Ogqz8RI+Lxt3DfiI+T0vwFP5T8ArvlqdX2VBOgC+TrqGXnZ0Mz58DlNzswniPaUk7dp9rSG+lHSUYmgdaAtoDksAhZRoEIeUUpQoSwFLAoWUaBiJQxAAANQPXNVpPpqFffyJ+RNAlHSUYmgkaAtoDksAhZRoEIeUUpQoSwFLAoWUaBiJQxAAAAAAAADwvwAAAAAAAPA/lHSUYmgraCxoLWgsdWKMB2hfcmFuZ2WUXZQoRz5p1VwP1AAAR0At/o03n06CZYwHZl9yYW5nZZRdlChHQUjEUryfsABHQUkk7tPM2ABljAJkY5RLD3Uu
#*# calibration_16 = gASVygMAAAAAAAB9lCiMAXaUSwWMBGZ0b2iUjBtudW1weS5wb2x5bm9taWFsLnBvbHlub21pYWyUjApQb2x5bm9taWFslJOUKYGUfZQojARjb2VmlIwVbnVtcHkuY29yZS5tdWx0aWFycmF5lIwMX3JlY29uc3RydWN0lJOUjAVudW1weZSMB25kYXJyYXmUk5RLAIWUQwFilIeUUpQoSwFLCoWUaAyMBWR0eXBllJOUjAJmOJSJiIeUUpQoSwOMATyUTk5OSv////9K/////0sAdJRiiUNQTmmsN8BF9T8omm98Xcz/P5db5RbC7eE/cYaFjm9d5b+KuDia8Xv1PyXG1ZPrCQ1AvUD9i3OT+7+zb4bYZGUSwOHwA/jHAfA/OuSJIC5SAUCUdJRijAZkb21haW6UaAtoDksAhZRoEIeUUpQoSwFLAoWUaBiJQxAe9XNrx16UPrZZuGpBuJQ+lHSUYowGd2luZG93lGgLaA5LAIWUaBCHlFKUKEsBSwKFlGgYiUMQAAAAAAAA8L8AAAAAAADwP5R0lGKMB19zeW1ib2yUjAF4lIwGc3ltYm9slGgsdWKMCWZ0b2hfaGlnaJRoBSmBlH2UKGgIaAtoDksAhZRoEIeUUpQoSwFLCoWUaBiJQ1Bwc/YW1fcaQPxBqWIbng1AO8MdN+4pBkBj2ydoU5T2P5y5C6L3ygnAVTNE5QDeE8AShg5dg5oWQOBWejOXCyNAokSJrzEIAcBUuoUdrZMRwJR0lGJoHWgLaA5LAIWUaBCHlFKUKEsBSwKFlGgYiUMQEG5D1nO1lD50x5nw78iUPpR0lGJoJGgLaA5LAIWUaBCHlFKUKEsBSwKFlGgYiUMQAAAAAAAA8L8AAAAAAADwP5R0lGJoK2gsaC1oLHVijARodG9mlGgFKYGUfZQoaAhoC2gOSwCFlGgQh5RSlChLAUsKhZRoGIlDUF4cm0yMoZQ+JMvU4F8qIj5W2gzSZk4Xvv/HKUiIY/o9NSnwXXEhGD6N7poEBxH1vZj0X65ZdyW+hE3GfH15DD6CP3PhXDwUPvuRR9+FOP29lHSUYmgdaAtoDksAhZRoEIeUUpQoSwFLAoWUaBiJQxAA2lnky5kKP5q4Lznh/RNAlHSUYmgkaAtoDksAhZRoEIeUUpQoSwFLAoWUaBiJQxAAAAAAAADwvwAAAAAAAPA/lHSUYmgraCxoLWgsdWKMB2hfcmFuZ2WUXZQoRz8KmcvkWdoAR0At/jdDMk95ZYwHZl9yYW5nZZRdlChHQUiiHPHEGABHQUkifOOgeABljAJkY5RLEHUu
#*# tap_adjust_z = -0.045
#*#
#*# [heater_bed_outer]
#*# pid_version = 1
#*# pid_target = 60.00
#*# pid_tolerance = 0.0200
#*# control = pid
#*# pid_kp = 74.985
#*# pid_ki = 1.727
#*# pid_kd = 814.061
#*#
#*# [skew_correction CaliFlower]
#*# xy_skew = -0.012916722466144717
#*# xz_skew = 0.0
#*# yz_skew = 0.0
